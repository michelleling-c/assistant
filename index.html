<!DOCTYPE html>
<html lang="zh-Hant-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºå‹ä¼´ - è€å‹è¨˜åŠ©æ‰‹</title>
    <style>
        :root {
            --primary-yellow: #facc15;
            --btn-hover: #eab308;
            --bg-color: #cfd1bb;
            --card-bg: #e2e2e2;
            --border-black: #1a1a1a;
        }

        body {
            background-color: var(--bg-color);
            color: #000000;
            font-family: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        header {
            background-color: var(--primary-yellow);
            border-bottom: 2px solid var(--border-black);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-main { display: flex; align-items: center; gap: 10px; }
        .heart-icon { color: #cc3333; width: 32px; height: 32px; }
        h1 { margin: 0; font-size: 1.8rem; font-weight: 900; }
        .subtitle { font-size: 0.9rem; font-weight: bold; color: #333; margin-top: 2px; }

        .info-container {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        .info-row { display: flex; gap: 12px; width: 100%; }
        .info-box {
            background: var(--card-bg);
            border: 2px solid var(--border-black);
            border-radius: 20px;
            padding: 12px 15px;
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 2px 4px 0px rgba(0,0,0,0.2);
        }

        .info-box-wide {
            width: 100%;
            background: var(--card-bg);
            border: 2px solid var(--border-black);
            border-radius: 20px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 2px 4px 0px rgba(0,0,0,0.2);
        }

        .info-label { font-size: 0.9rem; color: #555; font-weight: bold; }
        .info-value { font-size: 1.8rem; font-weight: 900; }

        #chat-area {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px 20px;
            display: flex;
            flex-direction: column;
        }

        .message {
            width: 90%;
            margin: 0 auto;
            padding: 15px 20px;
            font-size: 1.4rem;
            font-weight: bold;
            border: 2px solid var(--border-black);
            border-radius: 20px;
            background-color: #ffffff;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        footer {
            padding: 15px 20px 30px 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        .big-btn {
            background-color: var(--primary-yellow);
            border: 3px solid var(--border-black);
            border-radius: 20px;
            padding: 18px;
            font-size: 1.6rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            box-shadow: 0 6px 0 var(--border-black);
            color: #000;
            text-decoration: none;
            -webkit-tap-highlight-color: transparent;
        }

        .big-btn:active { transform: translateY(4px); box-shadow: 0 2px 0 var(--border-black); }
        
        #loading { text-align: center; color: #8b5cf6; font-weight: bold; display: none; margin-bottom: 5px; }
    </style>
</head>
<body>

<header>
    <div class="header-title">
        <div class="header-main">
            <svg class="heart-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            <h1>è€å‹è¨˜æ™ºèƒ½åŠ©æ‰‹</h1>
        </div>
        <div class="subtitle">æ™ºå‹ä¼´ - Reality Orientation</div>
    </div>
</header>

<div class="info-container">
    <div class="info-row">
        <div class="info-box">
            <span>ğŸ•’</span>
            <div>
                <div class="info-label">ç¾åœ¨æ™‚é–“</div>
                <div id="info-time" class="info-value">--:--</div>
            </div>
        </div>
        <div class="info-box">
            <span>ğŸ“…</span>
            <div>
                <div class="info-label">ä»Šæ—¥æ—¥æœŸ</div>
                <div id="info-date" class="info-value">--/--</div>
            </div>
        </div>
    </div>
    <div class="info-box-wide">
        <span id="weather-icon">â˜€ï¸</span>
        <div>
            <div class="info-label">ä»Šæ—¥æ—¥å­</div>
            <div id="info-day" class="info-value">æ­£åœ¨è®€å–...</div>
        </div>
    </div>
</div>

<div id="chat-area">
    <div id="loading">âœ¨ æ™ºå‹ä¼´è«—ç·Šé»åŒä½ è¬›...</div>
    <div id="chat-bubble" class="message">
        è€å‹è¨˜ï¼Œæ—©æ™¨ï¼æˆ‘æ˜¯ä½ çš„æ™ºå‹ä¼´ã€‚ä¸å¦‚å°ä¸€å°ä»Šæ—¥ä¿‚å¹¾æ™‚ï¼Œæˆ–è€…å•ä¸‹æˆ‘å¤©æ°£ï¼Ÿ
    </div>
</div>

<footer>
    <button class="big-btn" onclick="startRealityOrientation()">ğŸ—“ï¸ ä»Šæ—¥å¹¾æœˆå¹¾è™Ÿï¼Ÿ</button>
    <button class="big-btn" onclick="checkWeather()">â˜€ï¸ ä»Šæ—¥å¤©æ°£é»å‘€ï¼Ÿ</button>
    <button class="big-btn" onclick="getFestival()">ğŸ§§ å°±åšŸå’©ç¯€æ—¥ï¼Ÿ</button>
</footer>

<script>
    const synth = window.speechSynthesis;
    let voices = [];

    function loadVoices() {
        voices = synth.getVoices();
    }
    loadVoices();
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }

    function speak(text) {
        if (!synth) return;
        synth.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        const cantoneseVoice = voices.find(v => v.lang.includes('HK') || v.lang.includes('yue'));
        if (cantoneseVoice) utter.voice = cantoneseVoice;
        utter.lang = 'zh-HK';
        utter.rate = 0.85;
        utter.pitch = 1.0;
        utter.onerror = (e) => console.error("Speech error:", e);
        synth.speak(utter);
    }

    function updateClock() {
        const now = new Date();
        document.getElementById('info-time').innerText = now.toLocaleTimeString('zh-HK', { hour: '2-digit', minute: '2-digit', hour12: false });
        document.getElementById('info-date').innerText = `${now.getMonth() + 1}æœˆ${now.getDate()}æ—¥`;
        const dayNames = ["æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­"];
        document.getElementById('info-day').innerText = dayNames[now.getDay()];
    }

    // æ›´æ–°å¾Œçš„è‡ªå‹•åˆ¤æ–·ä¸‹ä¸€å€‹ç¯€æ—¥é‚è¼¯
    function getNextFestival() {
        const now = new Date();
        const currentYear = now.getFullYear();
        
        // è¨­å®šç¯€æ—¥æ™‚é–“è¡¨ (æœˆä»½å¾0é–‹å§‹è¨ˆï¼Œ1æœˆæ˜¯0ï¼Œ7æœˆæ˜¯6ï¼Œ10æœˆæ˜¯9)
        const festivals = [
            { name: "è¾²æ›†æ–°å¹´", month: 0, day: 29, desc: "åˆ°æ™‚å‘¨åœéƒ½å¥½ç†±é¬§ï¼Œæœ€ç·Šè¦åŒå±‹ä¼äººé–‹é–‹å¿ƒå¿ƒé£Ÿé “é£¯ã€‚" },
            { name: "æ¸…æ˜ç¯€", month: 3, day: 4, desc: "ä¿‚æ…çµ‚è¿½é å˜…æ—¥å­ï¼Œäº¦éƒ½ä¿‚æ˜¥å¤©è¸é’å˜…å¥½æ™‚æ©Ÿã€‚" },
            { name: "ç«¯åˆç¯€", month: 5, day: 10, desc: "åˆ°æ™‚å¯ä»¥é£Ÿç²½ï¼Œä»²å¯ä»¥å»ç‡é¾èˆŸæ¯”è³½å‘€ã€‚" },
            { name: "é¦™æ¸¯å›æ­¸ç´€å¿µæ—¥", month: 6, day: 1, desc: "ä¿‚æ…¶ç¥é¦™æ¸¯å›æ­¸å˜…æ—¥å­ï¼Œå‘¨åœéƒ½æœ‰å¥½å¤šæ…¶ç¥æ´»å‹•ã—ã€‚" },
            { name: "ä¸­ç§‹ç¯€", month: 8, day: 17, desc: "ä¿‚äººæœˆå…©åœ˜åœ“å˜…æ—¥å­ï¼Œè¨˜å¾—ä¸€é½Šè³æœˆåŒé£Ÿæœˆé¤…ã€‚" },
            { name: "åœ‹æ…¶ç¯€", month: 9, day: 1, desc: "ä¿‚æ…¶ç¥åœ‹å®¶ç”Ÿæ—¥å˜…å¤§æ—¥å­ï¼Œåˆ°æ™‚ç¶­æ¸¯ä»²æœƒæœ‰ç…™èŠ±ç‡æ·»ã€‚" },
            { name: "é‡é™½ç¯€", month: 9, day: 11, desc: "ä¿‚ç™»é«˜é çœºå˜…æ—¥å­ï¼Œè¨˜å¾—æ³¨æ„å®‰å…¨ï¼Œæ…¢æ…¢è¡Œã€‚" },
            { name: "å†¬è‡³", month: 11, day: 21, desc: "å†¬è‡³å¤§éå¹´ï¼Œæœ€ç·Šè¦ä¸€å®¶äººé½Šé½Šæ•´æ•´é£Ÿé¤é£¯ã€‚" },
            { name: "è–èª•ç¯€", month: 11, day: 25, desc: "å‘¨åœéƒ½æœ‰å¥½å¤šç‡ˆé£¾å¥½éšï¼Œä¿‚å……æ»¿å¹³å®‰åŒå–œæ¨‚å˜…æ—¥å­ã€‚" }
        ];

        for (let fest of festivals) {
            const festDate = new Date(currentYear, fest.month, fest.day);
            if (now < festDate) {
                return `å°±å¿«åˆ° ${fest.name} å–‡ï¼${fest.desc}`;
            }
        }
        
        return "å°±å¿«éå¹´å–‡ï¼ç¥ä½ æ–°å˜…ä¸€å¹´èº«é«”å¥åº·ï¼Œé–‹é–‹å¿ƒå¿ƒã€‚";
    }

    async function showAiReply(type) {
        const loading = document.getElementById('loading');
        const bubble = document.getElementById('chat-bubble');
        
        loading.style.display = 'block';
        bubble.innerText = "...";
        
        await new Promise(res => setTimeout(res, 800));
        
        loading.style.display = 'none';
        
        const now = new Date();
        const careTips = [
            "è¨˜ä½é£²å¤šå•²æš–æ°´å‘€ï¼Œå°èº«é«”å¥½ã€‚",
            "ä»Šæ—¥å¿ƒæƒ…å¥½ï¼Œå€‹äººéƒ½ç²¾ç¥å•²ï¼Œç¬‘å¤šå•²å•¦ï¼",
            "å¦‚æœæƒ³å»æ•£æ­¥ï¼Œè¨˜å¾—å¸¶æ”¯æ°´å–ºèº«ã€‚"
        ];
        const randomTip = careTips[Math.floor(Math.random() * careTips.length)];

        let resultText = "";

        if (type === 'date') {
            const days = ["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"];
            resultText = `ä»Šæ—¥ä¿‚ ${now.getFullYear()}å¹´${now.getMonth()+1}æœˆ${now.getDate()}æ—¥ï¼Œæ˜ŸæœŸ${days[now.getDay()]}ã€‚${randomTip}`;
        } else if (type === 'weather') {
            resultText = `ä»Šæ—¥å‡ºé¢å¤§ç´„ 21 åº¦ï¼Œå¤©æ°£å¹¾èˆ’æœã€‚å””å¤ªå‡éƒ½å””å¤ªç†±ï¼Œæœ€å•±å‡ºå»è¡Œä¸‹ã€‚`;
        } else if (type === 'festival') {
            resultText = getNextFestival();
        }

        bubble.innerText = resultText;
        speak(resultText);
    }

    function startRealityOrientation() { showAiReply('date'); }
    function checkWeather() { showAiReply('weather'); }
    function getFestival() { showAiReply('festival'); }

    window.onload = () => {
        updateClock();
        setInterval(updateClock, 10000);
        
        const unlockSpeech = () => {
            const utter = new SpeechSynthesisUtterance("");
            synth.speak(utter);
            document.removeEventListener('touchstart', unlockSpeech);
            document.removeEventListener('click', unlockSpeech);
        };
        document.addEventListener('touchstart', unlockSpeech);
        document.addEventListener('click', unlockSpeech);
    };
</script>
</body>
</html>
